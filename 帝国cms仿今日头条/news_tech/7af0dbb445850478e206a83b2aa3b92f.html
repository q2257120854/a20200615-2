<!doctype html>
<html>
<head>
    <link rel="alternate" media="only screen and (max-width: 640px)" href="http://m.test.dede168.com/news_tech/7af0dbb445850478e206a83b2aa3b92f.html" >
    <meta charset="gb2312" />
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
    
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    
<script src="http://siteapp.baidu.com/static/webappservice/uaredirect.js" type="text/javascript"></script><script type="text/javascript">uaredirect("http://m.test.dede168.com/news_tech/7af0dbb445850478e206a83b2aa3b92f.html");</script>
    
    <title>给产品经理讲技术丨程序员别唬我系列之：HTTP Header - 仿今日头条(TouTiao.com)</title>
    <meta name="keywords" content="科技,移动互联网,程序员,Chrome">
	<meta name="description" content="给产品经理讲技术丨程序员别唬我系列之：HTTP Header">

    <link type="text/css" rel="stylesheet" href="/style/base_627e6bf.css">
    <link type="text/css" rel="stylesheet" href="/style/detail_c0a321b.css">
    <link type="text/css" rel="stylesheet" href="/style/detail_a789cc0.css">
    <link type="text/css" rel="stylesheet" href="/style/core_b666bd6.css">
    
	<script type="text/javascript" charset="gb2312" src="/style/lib_538033e.js"></script>
    


</head>
<body class="">

    <div id="wrapper">
    <div id="pagelet-nav" data-test="toutiao.com">
    <div class="nav-inner clearfix">
        <div class="nav-logo">
            <a href="/" class="logo-box" ga_event="nav_icon">
                <img src="/style/slogo.png" class="logo">
            </a>
        </div>
        <div class="nav-title">
            <ul class="clearfix">
                <li>
                    <a data-node="home" ga_event="nav_index" class="btn" href="/">
                        <span>首页</span>
                    </a>
                </li>
                <li>
                    <a data-node="dynamic" ga_event="nav_dynamic" class="btn" href="#">
                        <span>动态</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="nav-subtitle">
            <ul class="nav-list clearfix">
                
                
                <li class="username-box nav-item" data-node="username">
                    <a ga_event="nav_login" class="btn user-head" href="javascript:;" data-node="login">
                        <span>登录</span>
                    </a>
                    <i class="line"></i>
                </li>
                <li class="nav-item more-box" data-node="more">
                    <a ga_event="nav_more" class="btn" href="/about/">
                        <span>更多</span>
                    </a>
                    <div class="layer">
                        <ul>
                            
                            <li><a href="http://m.test.dede168.com" class="layer-item">手机版</a></li>
                            
                            <li><a href="/about/about.html" class="layer-item">关于我们</a></li>
                            <li><a href="/about/join.html" class="layer-item">加入头条</a></li>
                            <li><a href="/about/report.html" class="layer-item">媒体报道</a></li>
                            <li><a href="/about/media_partners.html" class="layer-item">媒体合作</a></li>
                            <li><a href="/about/cooperation.html" class="layer-item">产品合作</a></li>
                            <li><a href="/about/media_cooperation.html" class="layer-item">合作说明</a></li>
                            <li><a href="/about/contact.html" class="layer-item">联系我们</a></li>
                            <li><a href="/about/user_agreement.html" class="layer-item">用户协议</a></li>
                            <li><a href="/about/complain.html" class="layer-item">投诉指引</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
    <div id="container" class="bg-white clearfix">
        <div class="container-main">
           <div class="article-detail">
               <div class="title">
                   <h1>给产品经理讲技术丨程序员别唬我系列之：HTTP Header</h1>
                   <div class="subtitle clearfix">
                        
                        <span class="profile_avatar"><a href="/news_tech/">科技</a></span>
                        <span class="profile_avatar">・ 来源:产品100</span>
                        <span class="time">2016-03-31 19:28</span>
                        
                   </div>
               </div>
               
               <div class="article-content">
                   <p><img src="http://p8.pstatp.com/large/44800026e5b25ce8318?123.jpg"/></p><p>【相关推荐】</p><p>有朋友在后台留言，询问如何区分用户是在普通浏览器还是在微信里面打开自家网站的，我是建议他看下「UA的故事」这篇历史文章，然后留下这段微信的UA：「Mozilla/5.0 (Linux; Android 6.0.1; SM-G9006V Build/MMB29U; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/48.0.2564.106 Mobile Safari/537.36 MicroMessenger/6.3.15.49_r8aff805.760 NetType/WIFI Language/zh_CN」</p><p>通过UA，服务器可以知道用户在什么浏览器上浏览网页，如果还想知道一些其它信息，应该从哪来查到呢？答案就是HTTP协议的Header。HTTP协议的Header是一块数据区域，分为两种类型，客户端向服务区发送请求时带的是请求头，而服务器响应客户端数据时，带的是响应头。请求头里面主要是一些客户端的基础信息（UA就是其中的一部分），而响应头里面是响应数据的一些信息，以及服务器要求客户端如何处理这些响应数据的指令。</p><p>我们来看栗子，这是打开豆瓣主页的一个请求头，里面的关键信息有：</p><ul><li>accept，表示当前浏览器可以接受哪些文件类型，注意哦这里有image/webp，表示我的浏览器可以支持webp格式的图片，那么如果服务器给我下饭webp的图片，可以更省流量</li><li>accept-encoding，表示当前浏览器可以接受的数据编码，如果服务器吐出的数据不是浏览器可接受的编码，那么「乱码导致的悲剧告白」还会重演</li><li>accept-language，表示当前使用的浏览语言，我的电脑当然是中文啦，当然一些英文也能接受:)</li><li>cookie，了解一些cookie知识的同学都知道，很多和用户相关的信息都存在cookie里，用户在向服务器发送请求数据时会带上。比如一个网站你登录了一次之后，就不用再登录了，就是因为你的登录成功的token放在cookie中了，而且每次请求都发送给服务器，服务器就知道你是一个已登录用户</li><li>user-agent，就是上面提到的UA，表示的是浏览器的版本信息</li></ul><p><img src="http://p1.pstatp.com/large/44a00026dcc269ca364?123.jpg"/></p><p>当服务器收到我的这个请求后，会经过一系列处理，返回我一个数据包，而响应头里面，就会描述这个数据包的基本信息，里面的关键信息有：</p><ul><li>content-encoding，表示这次回包是以gzip格式压缩编码的，这种压缩格式可以减少流量的消耗</li><li>content-length，表示这次回包的数据大小，如果数据大小不匹配，要当作异常处理</li><li>content-type，表示数据的格式，它是一个html页面，同时页面的编码格式是utf-8，按照这些信息，可以正常的简析出内容。content-type为不同的值时，浏览器会做不同的操作，如果content-type是</li><li>application/octet-stream，表示数据是一个二进制流，此时浏览器会走下载文件的逻辑，而不是打开一个页面</li><li>set-cookie，图中没有，但是大家经常遇到，就是服务器通知浏览器写入一个cookie</li><li>location，这个图中也没有，也是经常遇到的，那就是重定向，比如你请求的是www.douban.com，检测到你用的是手机浏览器，就把你的请求重定向到m.douban.com</li></ul><p><img src="http://p1.pstatp.com/large/413000c9d6c9ac64d96?123.jpg"/></p><p>通过HTTP的Header，可以识别出用户的一些详细信息，方便做更为定制化的需求，如果你想探索一下自己发出的请求中头里面有些什么，你可以这样做：打开Chrome浏览器并按下F12，唤起Chrome开发者工具，选择network这个tab，你发出的每个请求的详情都会在这里显示了。</p><p><img src="http://p3.pstatp.com/large/44800026e5d4373d440?123.jpg"/></p><p>尽情的玩耍吧～</p><p>欢迎添加微信公众号：给产品经理讲技术</p><p>少年关注我们的官方微博@产品100和微信订阅号：chanpin100ghsd，有惊喜哦！</p>               </div>
           </div>   
           <div id="pagelet-detailbar" class="clearfix"
     data-groupid="6267373648199811330">

    <ul data-node="tagList" class="tag-list">
       <i class="lb">相关标签：</i>

        <li><a href="/e/tags/?tagname=%BF%C6%BC%BC" target="_blank">科技</a> <a href="/e/tags/?tagname=%D2%C6%B6%AF%BB%A5%C1%AA%CD%F8" target="_blank">移动互联网</a> <a href="/e/tags/?tagname=%B3%CC%D0%F2%D4%B1" target="_blank">程序员</a> <a href="/e/tags/?tagname=Chrome" target="_blank">Chrome</a><br></li>
        
    </ul>
	<!--高速版-->
	<div id="SOHUCS" sid="497"></div>
	<script charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/changyan.js" ></script>
	<script type="text/javascript">
		window.changyan.api.config({
			appid: 'cys0Avatb',
			conf: 'prod_2c61c9f87cd630112e164bb7dd5d8e5e'
		});
	</script> 
    <div class="tools" 
          data-node="tools">
        <a class="item fav " 
           data-node="fav" data-type="repin">
          <i class="icon icon-fav"></i>
          <span>收藏</span>
        </a>
        <a data-node="share" 
           data-url="http://test.dede168.com/news_tech/7af0dbb445850478e206a83b2aa3b92f.html" 
           data-desc="来自仿今日头条 http://test.dede168.com" 
           data-text="给产品经理讲技术丨程序员别唬我系列之：HTTP Header" 
           data-pic="" 
           class="btn share item" 
           href="javascript:;">
                <i class="icon icon-share"></i>
                <span>分享</span>

                <span class="share-list">
                    <i ga_event="feed_item_share" 
                       ga_label="tsina" 
                       data-type="tsina" 
                       class="icon icon-tsina" 
                       href="javascript:;" title="分享到新浪微博"></i>
                    <i ga_event="feed_item_share"
                       ga_label="tqq" 
                       data-type="tqq" 
                       class="icon icon-tqq" 
                       href="javascript:;" title="分享到腾讯微博"></i>
                    <i ga_event="feed_item_share" ga_label="qzone" data-type="qzone" class="icon icon-qzone" href="javascript:;" title="分享到ＱＱ空间"></i>
                </span>
            </a>
        <a class="item report" data-node="report">
            <i class="icon icon-report"></i>
            <span><a href="#">投诉</a></span>
        </a>
    </div>
</div>

           
           

           


           
           
           
        </div>
        <div class="container-right">
            
            <div class="d-union-cell">
              <!--广告位 右侧250x250_1 start-->
					<script src="/d/js/acmsd/thea1.js" type="text/javascript"></script>
					<!--广告位 右侧250x250_1 end-->
            </div>
        </div>
    </div>
    </div>

    <div class="company" id="toutiaoCompanyWrapper">
        <p>
            <span class="J-company-name">&#169; 2016 仿今日头条 http://test.dede168.com</span>
            <a href="http://www.12377.cn/" target="_blank">中国互联网举报中心</a>
            <a href="http://www.miibeian.gov.cn/" target="_blank">京公网安备 11010802020116号</a>
            
        <p>
            <a href="/license/" class="icp" target="_blank">网络文化经营许可证</a>
            <a href="/chengnuoshu/" target="_blank">跟帖评论自律管理承诺书 </a>
            违法和不良信息举报：xxx@xxx.com            
        </p>
    </div>
    
    
    <script>
        window.scrollTo(0, 0);
		$(document).scroll(function() {
			var scrolltop=$(document).scrollTop();
			if(scrolltop>100){
				$('.d-union-cell').css({'position':'fixed','top':'0px'});
			}else{
				$('.d-union-cell').css({'position':'','top':''});
			}
		});

        
    </script>
    
    
<span style="display:none">统计代码填到这里 </span>
    
<script src="http://test.dede168.com/e/public/ViewClick/?classid=4&id=497&addclick=1"></script>
</body>
</html>
